# Тестовое задание Авдюшкин Данила

## Задача
Написать сервис анализа нарушений ПДД. В целях уменьшения временных и трудовых затрат ожидается минимальный функционал, обеспечивающий правильную работу сервиса. Нарушением ПДД в рамках данной задачи считается только проезд на красный свет. Для работы сервиса нужно использовать брокер сообщений cat и базу данных dog. В них представлены простейшие симуляции.

## Запуск

```
go run cmd/main/main.go
```

## Описание решения

Разработан сервис анализа нарушений ПДД с минимульным функционалом, обеспечивающим правильную работу, в решении используется исходная библиотека с брокером и базой данных. Реализованы:
* Обработка ошибок
* Gracefull-shutdown
* Многопоточность
* Остановка после обработки 200 сообщений, количество обработанных сообщений задается в конфиге
* Инициализация конфига при старте
* Если нарушения нет, то переходим к следующему, сохранение такой записи в БД отсутствуют, но обработка логируется
* Если нарушение есть, то кладем в БД по ключу `"Passage.LicenseNum_Track[i].T"` значение (гос.номер и точку TPoint)
* Учтен момент с "обрезкой" JSON в `cat.broadcast` такое поведение логируется и обработка переходит к следующему сообщению
* Учтен момент с отказом БД в `dog.Insert` через механизм ретраев, количество ретраев задается в конфиге
* Предусмотрен переход к новой БД